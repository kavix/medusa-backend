{
  "parameters": {
    "webAppName": {
      "type": "string",
      "defaultValue": "medusa-ctf-app"
    },
    "location": {
      "type": "string",
      "defaultValue": "East US"
    },
    "sku": {
      "type": "string",
      "defaultValue": "F1"
    }
  },
  "resources": [ema": "https: //schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters":
  webAppName: "medusa-ctf-app"
  location: "East US"
  sku: "F1"  # Free tier (perfect with student credits)
  
resources:
  - type: Microsoft.Web/serverfarms
    apiVersion: '2021-02-01'
    name: medusa-ctf-plan
    location: "[parameters('location')]"
    sku:
      name: "[parameters('sku')]"
      tier: "Free"
    properties:
      reserved: true  # Linux App Service Plan
      
  - type: Microsoft.Web/sites
    apiVersion: '2021-02-01'
    name: "[parameters('webAppName')]"
    location: "[parameters('location')]"
    dependsOn:
      - medusa-ctf-plan
    properties:
      serverFarmId: "[resourceId('Microsoft.Web/serverfarms', 'medusa-ctf-plan')]"
      siteConfig:
        linuxFxVersion: "DOCKER|ghcr.io/kavix/vulnerable-ctf-app:latest"
        appSettings:
          - name: "CTF_FLAG"
            value: "Medusa{CTF_CHALLENGE_PHASE1_PASSED}"
          - name: "NODE_ENV" 
            value: "production"
          - name: "WEBSITES_PORT"
            value: "3000"
          - name: "DOCKER_REGISTRY_SERVER_URL"
            value: "https://ghcr.io"